
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>无标题文档</title>
    <!--框架必需start-->
    <script type="text/javascript" src="~/quickui/libs/js/jquery.js"></script>
    <script type="text/javascript" src="~/quickui/libs/js/language/cn.js"></script>
    <script type="text/javascript" src="~/quickui/libs/js/framework.js"></script>
    <link href="~/quickui/libs/css/import_basic.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" id="skin" prePath="~/quickui/" />
    <link rel="stylesheet" type="text/css" id="customSkin" />
    <!--框架必需end-->
    <link rel="stylesheet" type="text/css" href="~/quickui/style/style.css" />

    <script src="~/quickui/libs/js/table/quiGrid.js" type="text/javascript"></script>

    <!--引入提示组件start-->
    <script type="text/javascript" src="/quickui/libs/js/popup/toast.js"></script>
    <script type="text/javascript" src="/quickui/libs/js/popup/notice.js"></script>
    <!--引入提示组件end-->
</head>
<body>
    <div class="page_content">
        <div class="demo_operation">
            <input type="button" value="新增功能页" class="primary" onclick="window.location='oa_78.html'" />
        </div>
        <div class="infoCard infoCard2">
            <div class="title">
                <span>菜单列表</span>
            </div>
            <div id="dataBasic"></div>
        </div>
    </div>

    <script type="text/javascript">
        var grid = null;
        var data = @MvcHtmlString.Create(@ViewBag.Data);
			//数据表格使用
        var gridData = data;

			function initComplete() {
				grid = $("#dataBasic").quiGrid({
					columns: [{
							display: '编号',
							name: 'ModSeq',
							width: "10%",
							cellClick: true
						},{
							display: '名称',
							name: 'MCaption',
							width: "20%"
						},{
							display: '链接',
							name: 'MenuLink',
							width: "40%"
						}, {
						    display: '分类',
						    name: 'OrderSeq',
						    width: "20%"
						}, {
							display: '操作',
							name: 'name',
							width: "10%",
							align: 'left',
							render: function(rowdata, rowindex, value, column) {
								var mainCon = $('<div></div>');
								var con = $('<span class="operation_add" onclick="" style="float:none;">编辑</span><span  class="operation_picking" onclick="removeItem('+ rowdata.ModSeq +')">删除</span>');
								mainCon.append(con);
								return mainCon.html();
							}
						}
					],
					data: gridData,
					sortName: 'ModSeq',
					rownumbers: false,
					checkbox: false,
					height: '99%',
					width: "99%",
					pageSize: 100,
					percentWidthMode: true,
					onAfterShowData: onAfterShowData

				});
			}

			function onAfterShowData(data) {

				$("#dataBasic").find(".popupMenu").each(function() {
					$(this).hover(function() {
						$(this).find(".popupMenu_con").show();
					}, function() {
						$(this).find(".popupMenu_con").hide();
					});
				})
			}

			function earlyWarning(){
				top.Dialog.open({URL:"../../sample_skin/demo/oa_52.html",Title:"设置预警",Width:400,Height:250});
			}

			function onEdit(rowid){
			    var diag = new top.Dialog();
			    diag.Title = "信息编辑";
			    diag.URL ="<%=path%>/userAction.do?method=preUpdate&userinfor.userId=" + rowid;
			    diag.Width=600;
			    diag.Height=400;
			    diag.OkButtonText = "保 存";
			    //顺序很重要，diag.show()之前添加确定按钮事件，show之后添加新按钮
			    diag.OKEvent = function() {
			        diag.innerFrame.contentWindow.submitHandler(1);
			    };
			    diag.show();

			}


			function removeItem(ModSeq)
			{
			    top.Dialog.confirm("确认删除"+ModSeq+"编号的记录吗",
                    function(){
                        $.ajax({
                            url: "/SystemSet/RemoveItem",
                            data: { ModSeq: ModSeq },
                            type: "post",
                            dataType: "json",
                            success: function (data) {
                                if (data.status == "yes") {
                                    top.Toast('showSuccessToast', data.message);
                                    grid.loadData();
                                } else {
                                    top.Toast('showErrorToast', data.message);
                                }
                            }
                        });
                    },
                    function(){
                        //点击了取消
                    });

			}
    </script>
</body>
</html>
